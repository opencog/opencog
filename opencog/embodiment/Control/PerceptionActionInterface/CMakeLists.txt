
ADD_DEFINITIONS(-DPVP_XSD_FILE_PATH=\\"${CMAKE_CURRENT_SOURCE_DIR}/BrainProxyAxon.xsd\\")

IF (HAVE_PROTOBUF)
    # Compile proto messages.
    SET(PROTO_ARGS 
        PROTOFILES PAI.MapInfo.proto
        OUTPATH ${CMAKE_CURRENT_BINARY_DIR}
    )
    PROTOBUF_GENERATE_CPP(PROTO_SRCS PROTO_HDRS ${PROTO_ARGS})
ENDIF (HAVE_PROTOBUF)

# Pick up the autogenerated PAI.MapInfo.pb.h from the build tree
INCLUDE_DIRECTORIES (
   ${CMAKE_BINARY_DIR}
)

ADD_LIBRARY (PAI SHARED
	PAIUtils
	ActionParamType
	ActionParameter
	ActionType
	AvatarAction
	ActionPlan
	PAI
	ActionPlanDispatcher
	EmbodimentErrorHandler
	EventResponder
	${PROTO_SRCS}
)

TARGET_LINK_LIBRARIES(PAI 
	Language
	Control
	AtomSpaceExtensions
	embodiment-types
	nlp-types
	${ATOMSPACE_query_LIBRARY}
	${XERCESC_LIBRARIES}
	${Boost_DATE_TIME_LIBRARY} 
	${Boost_REGEX_LIBRARY}
)

IF (HAVE_MOSES)
	TARGET_LINK_LIBRARIES(PAI LearningServerMessages)
ENDIF (HAVE_MOSES)

IF (HAVE_PROTOBUF)
	TARGET_LINK_LIBRARIES(PAI ${PROTOBUF_LIBRARY})
ENDIF (HAVE_PROTOBUF)

IF (HAVE_GUILE)
	TARGET_LINK_LIBRARIES(PAI server ${ATOMSPACE_LIBRARIES})
ENDIF (HAVE_GUILE)
